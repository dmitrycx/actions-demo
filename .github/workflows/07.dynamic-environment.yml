# .github/workflows/07.dynamic-environment.yml
name: Demo 07 - Dynamic Environment

on:
  create:            # auto trigger on new branch
  workflow_dispatch: # manual trigger for testing

jobs:
  create-env-on-branch-create:
    if: github.event_name == 'create' && github.event.ref_type == 'branch'
    runs-on: ubuntu-latest
    permissions:
      contents: read
      deployments: write

    environment:
      name: ${{ github.event.ref }}
      url: https://example.invalid/${{ github.event.ref }}

    steps:
      - name: Summary
        run: |
          echo "Created/updated environment: **${{ github.event.ref }}**" >> "$GITHUB_STEP_SUMMARY"
          echo "URL: https://example.invalid/${{ github.event.ref }}" >> "$GITHUB_STEP_SUMMARY"
